{% extends 'layout/base.html' %}

{% block title %}Trang chủ{% endblock %}

{% block content %}
<script src="{{ url_for('static', filename='js/main.js') }}?v=2"></script>

    <div class="container py-5" style="max-width: 1100px;">
        <div class="text-center mb-5">
            <h2 class="font-weight-bold text-uppercase" style="color: #444;">Các gói tập Gym</h2>

        </div>
        {% if packages %}
        <div class="row justify-content-center">
          {% for p in packages %}

            <div class="col-lg-4 col-md-4 col-sm-6 mb-4">

              <div class="card h-100 shadow-sm border-0 gym-card" style="border-radius: 15px; overflow: hidden;">

                <img class="card-img-top"
                     src="{{ url_for('static', filename='images/gym_default1.jpg') }}"
                     alt="{{ p.tenGoiTap }}"
                     style="height: 200px; object-fit: cover;">

                <div class="card-body d-flex flex-column text-center p-3">
                  <h5 class="card-title font-weight-bold text-dark">{{ p.tenGoiTap }}</h5>

                  <h4 class="text-primary font-weight-bold my-2">
                    {{ "{:,.0f}".format(p.giaTienGoi) }} VNĐ
                  </h4>

                  <p class="card-text text-muted small mb-3">
                    <i class="fa fa-clock-o"></i> Thời hạn: <strong>{{ p.thoiHan }} ngày</strong>
                  </p>

                  <div class="mt-auto">
                    {% if current_user.is_authenticated %}
                        <button type="button"
                                onclick="dangKyGoiTap({{ p.id }})"
                                class="btn btn-success btn-sm w-100 rounded-pill font-weight-bold shadow">
                            <i class="fa fa-shopping-cart"></i> Đăng ký ngay
                        </button>
                    {% else %}
                        <a href="{{ url_for('login_process', next=request.full_path) }}"
                           class="btn btn-primary btn-sm w-100 rounded-pill">
                           Đăng nhập để mua
                        </a>
                    {% endif %}
                  </div>

                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        {% else %}
        <div class="alert alert-danger mt-2">Không có sản phẩm nào!</div>
        {% endif %}

        {% if pages > 1 %}
        <div class="d-flex justify-content-center mt-4 mb-4">
            <ul class="pagination">
                {% for i in range(1, pages + 1) %}
                    <li class="page-item {% if request.args.get('page', 1)|int == i %}active{% endif %}">
                        <a class="page-link" href="/?page={{ i }}">{{ i }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
{% endblock %}